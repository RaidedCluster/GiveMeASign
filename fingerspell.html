<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fingerspell â€” Give Me a Sign</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@font-face {
  font-family: "Noto Sans SignWriting";
  src: url("NotoSansSignWriting-Regular.ttf") format("truetype");
}

:root {
  --blue:#0000cc;
  --yellow:#ffff00;
}

body {
  background: var(--blue);
  color: var(--yellow);
  font-family: "Noto Sans", Arial, sans-serif;
  padding: 2rem;
}

a { color: var(--yellow); text-decoration:none; font-weight:700; }

h1 { font-size:3rem; margin:1rem 0 1rem; }

/* Replace your existing textarea block with this */
textarea {
  width: 100%;
  background: transparent;
  color: var(--yellow);
  border: 2px solid var(--yellow);
  padding: 1rem;
  font-size: 1.2rem;
  resize: vertical;
  border-radius: 1rem; /* Added for rounded corners */
  box-sizing: border-box; /* Ensures padding doesn't break the width */
}

#inputText { height:120px; font-family:"Noto Sans",Arial,sans-serif; }
#output {
  height:260px;
  margin-top:2rem;
  font-family:"Noto Sans SignWriting", monospace;
  white-space:pre;
}

button {
  background: var(--yellow);
  color: var(--blue);
  border: none;
  padding: 0.8rem 1.4rem;
  font-family: "Noto Sans", Arial, sans-serif;
  font-size: 1rem;
  font-weight: 700;
  margin-right: 1rem;
  margin-top: 1rem;
  cursor: pointer;
  border-radius: 0.5rem; /* Added rounded corners */
}

/* language picker */
.lang { position:relative; display:inline-block; margin-bottom:1rem; }
#langButton {
  border: 2px solid var(--yellow);
  padding: 0.4rem 0.8rem;
  font-family: "Noto Sans", Arial, sans-serif;
  font-weight: 700;
  cursor: pointer;
  user-select: none;
  border-radius: 0.5rem; /* Added rounded corners */
}
#langMenu {
  position:absolute;
  top:100%; left:0;
  background:var(--blue);
  border:2px solid var(--yellow);
  display:none;
  z-index:10;
  border-radius: 0.5rem;
}
#langMenu div {
  padding:0.4rem 0.8rem;
  cursor:pointer;
}
#langMenu div:hover {
  background:var(--yellow);
  color:var(--blue);
}

button {
  background: var(--yellow);
  color: var(--blue);
  border: none;
  padding: 0.8rem 1.4rem;
  font-family: "Noto Sans", Arial, sans-serif; /* Add this line */
  font-size: 1rem;
  font-weight: 700;
  margin-right: 1rem;
  margin-top: 1rem;
  cursor: pointer;
}
</style>
</head>

<body>

<a href="index.html">â† Give Me a Sign</a>
<h1>Fingerspell</h1>

<div class="lang">
  <div id="langButton" onclick="toggleLang()">ASL â–¾</div>
<div id="langMenu">
    <div onclick="pickLang('asl')">ASL</div>
    <div onclick="pickLang('jsl')">JSL</div>
    <div onclick="pickLang('libras')">LIBRAS</div>
</div>
</div>
</div>

<textarea id="inputText" placeholder="Type here..."></textarea><br>
<button onclick="render('horizontal')">Horizontal</button>
<button onclick="render('vertical')">Vertical</button>
<textarea id="output"></textarea>

<script>
const THIN="\u2004", NBSP="\u00A0";
const glen=s=>Array.from(s).length;

const DICTS = {
    asl: {
        A:"ğ£·ğªœ",B:"ğ¡‡ğªœ",C:"ğ¡­ğªœ",D:"ğ ğªœ",E:"ğ¡Šğªœ",F:"ğ£ğªœ",G:"ğ£°",H:"ğ •ğª¢",I:"ğ¢’ğªœ",
        J:"ğ¦¢ğª¬\nğ¢’ğªœ",K:"ğ¡€ğªœ",L:"ğ£œğªœ",M:"ğ¢ğªœ",N:"ğ ™ğªœ",O:"ğ¡¶ğªœ",P:"ğ¡€ğªœğª¡",Q:"ğ£±ğªœğª¡",
        R:"ğ šğªœ",S:"ğ¤ƒğªœ",T:"ğ£»ğªœ",U:"ğ •ğªœ",V:"ğ ğªœ",W:"ğ¢‡ğªœ",X:"ğ †ğªœ",Y:"ğ¢šğªœ",
        Z:THIN+"ğ¥…ğªª\nğ €ğªœ",
        ".":"ğªˆğª¢",",":"ğª‡ğª¢",":":"ğªŠğª¢",";":"ğª‰ğª¢","(":"ğª‹ğª¢",")":"ğª‹ğª¦","?":"ğ¦Ÿğªğª¬\nğ €ğªœ",
        0:"ğ¡¶ğªœ",1:"ğ €ğªœ",2:"ğ ğªœ",3:"ğ ğªœ",4:"ğ¡„ğªœ",5:"ğ¡Œğªœ",6:"ğ¢‡ğªœ",7:"ğ¢¥ğªœ",8:"ğ¢»ğªœ",9:"ğ£ğªœ"
    },
    jsl: {
        // Digraphs (2-char keys)
        "ãã‚ƒ":["ğ£®ğªœğª¦","ğ¥¥ğª¤","ğ¢šğªœ"],"ãã‚…":["ğ£®ğªœğª¦","ğ¥¥ğª¤","ğ¢Œ"],"ãã‚‡":["ğ£®ğªœğª¦","ğ¥¥ğª¤","ğ¡„ğª¢"],
        "ã—ã‚ƒ":["ğ ğª¢","ğ¥¥ğª¤","ğ¢šğªœ"],"ã—ã‚…":["ğ ğª¢","ğ¥¥ğª¤","ğ¢Œ"],"ã—ã‚‡":["ğ ğª¢","ğ¥¥ğª¤","ğ¡„ğª¢"],
        "ã¡ã‚ƒ":["ğ¢–ğªœ","ğ¥¥ğª¤","ğ¢šğªœ"],"ã¡ã‚…":["ğ¢–ğªœ","ğ¥¥ğª¤","ğ¢Œ"],"ã¡ã‚‡":["ğ¢–ğªœ","ğ¥¥ğª¤","ğ¡„ğª¢"],
        "ã«ã‚ƒ":["ğ ğª¢","ğ¥¥ğª¤","ğ¢šğªœ"],"ã«ã‚…":["ğ ğª¢","ğ¥¥ğª¤","ğ¢Œ"],"ã«ã‚‡":["ğ ğª¢","ğ¥¥ğª¤","ğ¡„ğª¢"],
        "ã²ã‚ƒ":["ğ €ğªœ","ğ¥¥ğª¤","ğ¢šğªœ"],"ã²ã‚…":["ğ €ğªœ","ğ¥¥ğª¤","ğ¢Œ"],"ã²ã‚‡":["ğ €ğªœ","ğ¥¥ğª¤","ğ¡„ğª¢"],
        "ã¿ã‚ƒ":["ğ¢Œğª¢","ğ¥¥ğª¤","ğ¢šğªœ"],"ã¿ã‚…":["ğ¢Œğª¢","ğ¥¥ğª¤","ğ¢Œ"],"ã¿ã‚‡":["ğ¢Œğª¢","ğ¥¥ğª¤","ğ¡„ğª¢"],
        "ã‚Šã‚ƒ":["ğ¦¢ğª¬","ğ ğª","ğ¥¥ğª¤","ğ¢šğªœ"],"ã‚Šã‚…":["ğ¦¢ğª¬","ğ ğª","ğ¥¥ğª¤","ğ¢Œ"],"ã‚Šã‚‡":["ğ¦¢ğª¬","ğ ğª","ğ¥¥ğª¤","ğ¡„ğª¢"],
        "ãã‚ƒ":["ğ£®ğªœğª¦ğ¥¥ğª¦","ğ¥¥ğª¤","ğ¢šğªœ"],"ãã‚…":["ğ£®ğªœğª¦ğ¥¥ğª¦","ğ¥¥ğª¤","ğ¢Œ"],"ãã‚‡":["ğ£®ğªœğª¦ğ¥¥ğª¦","ğ¥¥ğª¤","ğ¡„ğª¢"],
        "ã˜ã‚ƒ":["ğ ğª¢ğ¥¥ğª¦","ğ¥¥ğª¤","ğ¢šğªœ"],"ã˜ã‚…":["ğ ğª¢ğ¥¥ğª¦","ğ¥¥ğª¤","ğ¢Œ"],"ã˜ã‚‡":["ğ ğª¢ğ¥¥ğª¦","ğ¥¥ğª¤","ğ¡„ğª¢"],
        "ã´ã‚ƒ":["ğ¤ª","ğ €ğªœ","ğ¥¥ğª¤","ğ¢šğªœ"],"ã´ã‚…":["ğ¤ª","ğ €ğªœ","ğ¥¥ğª¤","ğ¢Œ"],"ã´ã‚‡":["ğ¤ª","ğ €ğªœ","ğ¥¥ğª¤","ğ¡„ğª¢"],
        // Standard (1-char keys)
        "ã‚":"ğ£·ğªœ","ã":"ğ¥¥ğª¤\nğ£·ğªœ","ã„":"ğ¢’ğªœ","ãƒ":"ğ¥¥ğª¤\nğ¢’ğªœ","ã†":"ğ •ğªœ","ã…":"ğ¥¥ğª¤\nğ •ğªœ","ãˆ":"ğ¡¦ğªœ","ã‡":"ğ¥¥ğª¤\nğ¡¦ğªœ","ãŠ":"ğ¡¶ğª›","ã‰":"ğ¥¥ğª¤\nğ¡¶ğª›",
        "ã‹":"ğ¡€ğªœ","ã‚•":"ğ¥¥ğª¤\nğ¡€ğªœ","ã":"ğ£®ğªœğª¦","ã":"ğ¡ğª¢","ã‘":"ğ¡‡ğªœ","ã‚–":"ğ¥¥ğª¤\nğ¡‡ğªœ","ã“":"ğ¢€ğª›",
        "ã•":"ğ¤ƒğªœ","ã—":"ğ ğª¢","ã™":"ğ ğª¤","ã›":"ğ£†ğªœ","ã":"ğ €ğª",
        "ãŸ":"ğ£·ğª","ã¡":"ğ¢–ğªœ","ã¤":"ğ¢³ğªœ","ã£":"ğ¥¥ğª¤\nğ¢³ğªœ","ã¦":"ğ¡Œğªœ","ã¨":"ğ •",
        "ãª":"ğ ğª¤","ã«":"ğ ğª¢","ã¬":"ğ †ğª›","ã­":"ğ¡Œğª¤","ã®":"ğ¤ªğª£\nğ €ğª›",
        "ã¯":"ğ •ğª","ã²":"ğ €ğªœ","ãµ":"ğ£°ğªŸğª¡","ã¸":"ğ¢šğªŸ","ã»":"ğ¢€ğª",
        "ã¾":"ğ¢Œğª¤","ã¿":"ğ¢Œğª¢","ã‚€":"ğ£œğª¢","ã‚":"ğ£ğªœ","ã‚‚":"ğ¤ªğª¤\nğ¤œğ£´ğªğª¦",
        "ã‚„":"ğ¢šğªœ","ã‚ƒ":"ğ¥¥ğª¤\nğ¢šğªœ","ã‚†":"ğ¢Œ","ã‚…":"ğ¥¥ğª¤\nğ¢Œ","ã‚ˆ":"ğ¡„ğª¢","ã‚‡":"ğ¥¥ğª¤\nğ¡„ğª¢",
        "ã‚‰":"ğ šğªœ","ã‚Š":"ğ¦¢ğª¬\nğ ğª","ã‚‹":"ğ ğªœ","ã‚Œ":"ğ£œğªœ","ã‚":"ğ ğª›",
        "ã‚":"ğ¢†ğªœ","ã‚":"ğ¥¥ğª¤\nğ¢†ğªœ","ã‚":"ğ¥¥ğª¤\nğ¢’ğªœ","ã‚‘":"ğ¥¥ğª¤\nğ¡¦ğªœ","ã‚’":"ğ¥¥ğª¤\nğ¡¶ğª›","ã‚“":"ğ¦¢ğª¤\nğ €ğª",
        "ãŒ":"ğ¡€ğªœğ¥¥ğª¦","ã":"ğ£®ğªœğª¦ğ¥¥ğª¦","ã":"ğ¡ğª¢ğ¥¥ğª¦","ã’":"ğ¡‡ğªœğ¥¥ğª¦","ã”":"ğ¢€ğª›ğ¥¥ğª¦",
        "ã–":"ğ¤ƒğªœğ¥¥ğª¦","ã˜":"ğ ğª¢ğ¥¥ğª¦","ãš":"ğ ğª¤ğ¥¥ğª¦","ãœ":"ğ£†ğªœğ¥¥ğª¦","ã":"ğ €ğªğ¥¥ğª¦",
        "ã ":"ğ£·ğªğ¥¥ğª¦","ã¢":"ğ¢–ğªœğ¥¥ğª¦","ã¥":"ğ¢³ğªœğ¥¥ğª¦","ã§":"ğ¡Œğªœğ¥¥ğª¦","ã©":"ğ •ğ¥¥ğª¦",
        "ã°":"ğ •ğªğ¥¥ğª¦","ã³":"ğ €ğªœğ¥¥ğª¦","ã¶":"ğ£°ğªŸğª¡ğ¥¥ğª¦","ã¹":"ğ¢šğªŸğ¥¥ğª¦","ã¼":"ğ¢€ğªğ¥¥ğª¦",
        "ã±":"ğ¤ª\nğ •ğª","ã´":"ğ¤ª\nğ €ğªœ","ã·":"ğ¤ª\nğ£°ğªŸğª¡","ãº":"ğ¤ª\nğ¢šğªŸ","ã½":"ğ¤ª\nğ¢€ğª",
        "ãƒ¼":"ğ¥¥ğª¤",
        "0":"ğ Šğª›","1":"ğ €ğªœ","2":"ğ ğªœ","3":"ğ¢†ğªœ","4":"ğ¡„ğªœ","5":"ğ£·ğªœ","6":"ğ£œğª¢","7":"ğ ğª¢","8":"ğ¢ğª¢","9":"ğ¡ğª¢"
    },
    libras: {
        A:"ğ£·ğªœ", B:"ğ¡‡ğªœ", C:"ğ¡­ğªœ", "Ã‡":"ğ¡­ğªœ\nğ§¢ğª", D:"ğ ğªœ", E:"ğ¡Šğªœ", 
        F:"ğ£’ğªœ", G:"ğ£Ÿğªœ", H:"ğ§Ÿ\nğ¡€ğªœğª§", I:"ğ¢’ğªœ", J:"ğ¢’ğªŸ\nğ¦¢ğª¬", 
        K:"ğ¤®\nğ¡€ğªœ", L:"ğ£œğªœ", M:"ğ¢ğªœ", N:"ğ ™ğªœ", O:"ğ¡¶ğªœ", P:"ğ¡€ğªŸ", 
        Q:"ğ£²ğªŸ", R:"ğ šğªœ", S:"ğ¤ƒğªœ", T:"ğ£“ğªœ", U:"ğ •ğªœ", V:"ğ ğªœ", 
        W:"ğ¢‡ğªœ", X:"ğ ŠğªŸ\nğ¥¥ğª¤", Y:"ğ¢šğªœ", Z:THIN+"ğ¥…ğªª\nğ €ğªœ",
        // Libras Numbers
        "0":"ğ¡¶ğªœ", "1":"ğ €", "2":"ğ ", "3":"ğ¢†", "4":"ğ¡„", 
        "5":"ğ ğª¨", "6":"ğ¡µğªğª®", "7":"ğ¢ƒğª›", "8":"ğ§¢ğª\nğ¤ƒğª›", "9":"ğ¡µğªŸğª¢"
    }
};

let CURRENT = DICTS.asl;
let LANG_CODE = "asl";

const VERTICAL = { ".":"ğªˆ",",":"ğª‡",":":"ğªŠ",";":"ğª‰","(":"ğª‹",")":"ğª‹ğª¤" };

function setLanguage(l) { 
    LANG_CODE = l;
    CURRENT = DICTS[l] || DICTS.asl; 
    render("horizontal"); 
}

function textToFingerspell(text, mode) {
    if (!text.trim()) return "";

    text = text.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
    
    // Tokenize for JSL digraphs
    let tokens = [];
    let i = 0;
    const chars = Array.from(text);
    while (i < chars.length) {
        let pair = chars[i] + (chars[i+1] || "");
        if (CURRENT[pair] && pair.length > 1) {
            tokens.push(CURRENT[pair]);
            i += 2;
        } else {
            let char = chars[i];
            let lookup = CURRENT[char] || CURRENT[char.toUpperCase()] || char;
            tokens.push(lookup);
            i += 1;
        }
    }

    if (mode === "vertical") {
        return tokens.map(t => {
            if (Array.isArray(t)) return t.join("\n");
            let val = VERTICAL[t] || t;
            return val.replace(/\n/g, "\n"); // already handled
        }).join("\n\n");
    }

    // Horizontal logic
    // We normalize everything to an array of components
    const processed = tokens.map(t => {
        if (Array.isArray(t)) return t;
        return typeof t === "string" ? t.split("\n") : [t];
    });

    const maxLines = Math.max(...processed.map(p => p.length));
    let grid = Array(maxLines).fill("");

    for (const parts of processed) {
        const diff = maxLines - parts.length;
        // Top-align or Bottom-align? Your Python code used top padding.
        // Let's match the existing ASL 'bottom-heavy' style.
        for (let j = 0; j < maxLines; j++) {
            let segment = "";
            if (j < diff) {
                segment = NBSP; // padding
            } else {
                segment = parts[j - diff];
            }
            grid[j] += segment;
        }
    }
    return grid.join("\n");
}

function render(mode) {
    const out = [], lines = inputText.value.split("\n");
    for (const l of lines) {
        const r = textToFingerspell(l, mode);
        if (r) out.push(r);
    }
    output.value = out.join("\n\n");
}

function toggleLang() {
    langMenu.style.display = langMenu.style.display === "block" ? "none" : "block";
}

function pickLang(l) {
    setLanguage(l);
    langButton.textContent = l.toUpperCase() + " â–¾";
    langMenu.style.display = "none";
}

document.addEventListener("click", e => {
    if (!e.target.closest(".lang")) langMenu.style.display = "none";
});
</script>

</body>
</html>
