<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fingerspell â€” Give Me a Sign</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@font-face {
  font-family: "Noto Sans SignWriting";
  src: url("NotoSansSignWriting-Regular.ttf") format("truetype");
}

:root {
  --blue:#0000cc;
  --yellow:#ffff00;
}

body {
  background: var(--blue);
  color: var(--yellow);
  font-family: "Noto Sans", Arial, sans-serif;
  padding: 2rem;
}

a { color: var(--yellow); text-decoration:none; font-weight:700; }

h1 { font-size:3rem; margin:1rem 0 1rem; }

textarea {
  width: 100%;
  background: transparent;
  color: var(--yellow);
  border: 2px solid var(--yellow);
  padding: 1rem;
  font-size: 1.2rem;
  resize: vertical;
  border-radius: 1rem;
  box-sizing: border-box;
}

#inputText { height:120px; font-family:"Noto Sans",Arial,sans-serif; }
#output {
  height:260px;
  margin-top:2rem;
  font-family:"Noto Sans SignWriting", monospace;
  white-space:pre;
}

button {
  background: var(--yellow);
  color: var(--blue);
  border: none;
  padding: 0.8rem 1.4rem;
  font-family: "Noto Sans", Arial, sans-serif;
  font-size: 1rem;
  font-weight: 700;
  margin-right: 1rem;
  margin-top: 1rem;
  cursor: pointer;
  border-radius: 0.5rem;
}

/* language picker */
.lang { position:relative; display:inline-block; margin-bottom:1rem; }
#langButton {
  border: 2px solid var(--yellow);
  padding: 0.4rem 0.8rem;
  font-family: "Noto Sans", Arial, sans-serif;
  font-weight: 700;
  cursor: pointer;
  user-select: none;
  border-radius: 0.5rem;
}
#langMenu {
  position:absolute;
  top:100%; left:0;
  background:var(--blue);
  border:2px solid var(--yellow);
  display:none;
  z-index:10;
  border-radius: 0.5rem;
}
#langMenu div {
  padding:0.4rem 0.8rem;
  cursor:pointer;
}
#langMenu div:hover {
  background:var(--yellow);
  color:var(--blue);
}
</style>
</head>

<body>

<a href="index.html">â† Give Me a Sign</a>
<h1>Fingerspell</h1>

<div class="lang">
  <div id="langButton" onclick="toggleLang()">ASL â–¾</div>
  <div id="langMenu">
    <div onclick="pickLang('asl')">ASL</div>
    <div onclick="pickLang('jsl')">JSL</div>
    <div onclick="pickLang('libras')">LIBRAS</div>
  </div>
</div>

<textarea id="inputText" placeholder="Type here..."></textarea><br>
<button onclick="render('horizontal')">Horizontal</button>
<button onclick="render('vertical')">Vertical</button>
<textarea id="output"></textarea>

<script>
const THIN  = "\u2004";   // Thin space
const NBSP  = "\u00A0";   // Non-breaking space (lane padding)
const SEP   = "\u2001";   // Em Quad spacer (horizontal column separator for JSL)

// â”€â”€â”€ ASL / LIBRAS dictionaries (string-based, \n for multi-line) â”€â”€â”€
const DICTS_STR = {
    asl: {
        A:"ğ£·ğªœ",B:"ğ¡‡ğªœ",C:"ğ¡­ğªœ",D:"ğ ğªœ",E:"ğ¡Šğªœ",F:"ğ£ğªœ",G:"ğ£°",H:"ğ •ğª¢",I:"ğ¢’ğªœ",
        J:"ğ¦¢ğª¬\nğ¢’ğªœ",K:"ğ¡€ğªœ",L:"ğ£œğªœ",M:"ğ¢ğªœ",N:"ğ ™ğªœ",O:"ğ¡¶ğªœ",P:"ğ¡€ğªœğª¡",Q:"ğ£±ğªœğª¡",
        R:"ğ šğªœ",S:"ğ¤ƒğªœ",T:"ğ£»ğªœ",U:"ğ •ğªœ",V:"ğ ğªœ",W:"ğ¢‡ğªœ",X:"ğ †ğªœ",Y:"ğ¢šğªœ",
        Z:THIN+"ğ¥…ğªª\nğ €ğªœ",
        ".":"ğªˆğª¢",",":"ğª‡ğª¢",":":"ğªŠğª¢",";":"ğª‰ğª¢","(":"ğª‹ğª¢",")":"ğª‹ğª¦","?":"ğ¦Ÿğªğª¬\nğ €ğªœ",
        0:"ğ¡¶ğªœ",1:"ğ €ğªœ",2:"ğ ğªœ",3:"ğ ğªœ",4:"ğ¡„ğªœ",5:"ğ¡Œğªœ",6:"ğ¢‡ğªœ",7:"ğ¢¥ğªœ",8:"ğ¢»ğªœ",9:"ğ£ğªœ"
    },
    libras: {
        A:"ğ£·ğªœ", B:"ğ¡‡ğªœ", C:"ğ¡­ğªœ", "Ã‡":"ğ¡­ğªœ\nğ§¢ğª", D:"ğ ğªœ", E:"ğ¡Šğªœ",
        F:"ğ£’ğªœ", G:"ğ£Ÿğªœ", H:"ğ§Ÿ\nğ¡€ğªœğª§", I:"ğ¢’ğªœ", J:"ğ¢’ğªŸ\nğ¦¢ğª¬",
        K:"ğ¤®\nğ¡€ğªœ", L:"ğ£œğªœ", M:"ğ¢ğªœ", N:"ğ ™ğªœ", O:"ğ¡¶ğªœ", P:"ğ¡€ğªŸ",
        Q:"ğ£²ğªŸ", R:"ğ šğªœ", S:"ğ¤ƒğªœ", T:"ğ£“ğªœ", U:"ğ •ğªœ", V:"ğ ğªœ",
        W:"ğ¢‡ğªœ", X:"ğ ŠğªŸ\nğ¥¥ğª¤", Y:"ğ¢šğªœ", Z:THIN+"ğ¥…ğªª\nğ €ğªœ",
        "0":"ğ¡¶ğªœ", "1":"ğ €", "2":"ğ ", "3":"ğ¢†", "4":"ğ¡„",
        "5":"ğ ğª¨", "6":"ğ¡µğªğª®", "7":"ğ¢ƒğª›", "8":"ğ§¢ğª\nğ¤ƒğª›", "9":"ğ¡µğªŸğª¢"
    }
};

// â”€â”€â”€ JSL dictionary (array-based, matching Python Sign = List[str]) â”€â”€â”€
const JSL_DICT = {
    "ã‚":["ğ£·ğªœ"],"ã":["ğ¥¥ğª¤","ğ£·ğªœ"],"ã„":["ğ¢’ğªœ"],"ãƒ":["ğ¥¥ğª¤","ğ¢’ğªœ"],
    "ã†":["ğ •ğªœ"],"ã…":["ğ¥¥ğª¤","ğ •ğªœ"],"ãˆ":["ğ¡¦ğªœ"],"ã‡":["ğ¥¥ğª¤","ğ¡¦ğªœ"],
    "ãŠ":["ğ¡¶ğª›"],"ã‰":["ğ¥¥ğª¤","ğ¡¶ğª›"],"ã‹":["ğ¡€ğªœ"],"ã‚•":["ğ¥¥ğª¤","ğ¡€ğªœ"],
    "ã":["ğ£®ğªœğª¦"],"ã":["ğ¡ğª¢"],"ã‘":["ğ¡‡ğªœ"],"ã‚–":["ğ¥¥ğª¤","ğ¡‡ğªœ"],
    "ã“":["ğ¢€ğª›"],"ã•":["ğ¤ƒğªœ"],"ã—":["ğ ğª¢"],"ã™":["ğ ğª¤"],"ã›":["ğ£†ğªœ"],"ã":["ğ €ğª"],
    "ãŸ":["ğ£·ğª"],"ã¡":["ğ¢–ğªœ"],"ã¤":["ğ¢³ğªœ"],"ã£":["ğ¥¥ğª¤","ğ¢³ğªœ"],
    "ã¦":["ğ¡Œğªœ"],"ã¨":["ğ •"],"ãª":["ğ ğª¤"],"ã«":["ğ ğª¢"],"ã¬":["ğ †ğª›"],"ã­":["ğ¡Œğª¤"],"ã®":["ğ¤ªğª£","ğ €ğª›"],
    "ã¯":["ğ •ğª"],"ã²":["ğ €ğªœ"],"ãµ":["ğ£°ğªŸğª¡"],"ã¸":["ğ¢šğªŸ"],"ã»":["ğ¢€ğª"],
    "ã¾":["ğ¢Œğª¤"],"ã¿":["ğ¢Œğª¢"],"ã‚€":["ğ£œğª¢"],"ã‚":["ğ£ğªœ"],"ã‚‚":["ğ¤ªğª¤","ğ¤œğ£´ğªğª¦"],
    "ã‚„":["ğ¢šğªœ"],"ã‚ƒ":["ğ¥¥ğª¤","ğ¢šğªœ"],"ã‚†":["ğ¢Œ"],"ã‚…":["ğ¥¥ğª¤","ğ¢Œ"],
    "ã‚ˆ":["ğ¡„ğª¢"],"ã‚‡":["ğ¥¥ğª¤","ğ¡„ğª¢"],"ã‚‰":["ğ šğªœ"],"ã‚Š":["ğ¦¢ğª¬","ğ ğª"],"ã‚‹":["ğ ğªœ"],"ã‚Œ":["ğ£œğªœ"],"ã‚":["ğ ğª›"],
    "ã‚":["ğ¢†ğªœ"],"ã‚":["ğ¥¥ğª¤","ğ¢†ğªœ"],"ã‚":["ğ¥¥ğª¤","ğ¢’ğªœ"],"ã‚‘":["ğ¥¥ğª¤","ğ¡¦ğªœ"],"ã‚’":["ğ¥¥ğª¤","ğ¡¶ğª›"],
    "ã‚“":["ğ¦¢ğª¤","ğ €ğª"],
    "ãŒ":["ğ¡€ğªœğ¥¥ğª¦"],"ã":["ğ£®ğªœğª¦ğ¥¥ğª¦"],"ã":["ğ¡ğª¢ğ¥¥ğª¦"],"ã’":["ğ¡‡ğªœğ¥¥ğª¦"],"ã”":["ğ¢€ğª›ğ¥¥ğª¦"],
    "ã–":["ğ¤ƒğªœğ¥¥ğª¦"],"ã˜":["ğ ğª¢ğ¥¥ğª¦"],"ãš":["ğ ğª¤ğ¥¥ğª¦"],"ãœ":["ğ£†ğªœğ¥¥ğª¦"],"ã":["ğ €ğªğ¥¥ğª¦"],
    "ã ":["ğ£·ğªğ¥¥ğª¦"],"ã¢":["ğ¢–ğªœğ¥¥ğª¦"],"ã¥":["ğ¢³ğªœğ¥¥ğª¦"],"ã§":["ğ¡Œğªœğ¥¥ğª¦"],"ã©":["ğ •ğ¥¥ğª¦"],
    "ã°":["ğ •ğªğ¥¥ğª¦"],"ã³":["ğ €ğªœğ¥¥ğª¦"],"ã¶":["ğ£°ğªŸğª¡ğ¥¥ğª¦"],"ã¹":["ğ¢šğªŸğ¥¥ğª¦"],"ã¼":["ğ¢€ğªğ¥¥ğª¦"],
    "ã±":["ğ¤ª","ğ •ğª"],"ã´":["ğ¤ª","ğ €ğªœ"],"ã·":["ğ¤ª","ğ£°ğªŸğª¡"],"ãº":["ğ¤ª","ğ¢šğªŸ"],"ã½":["ğ¤ª","ğ¢€ğª"],
    "ã‚”":["ğ •ğªœğ¥¥ğª¦"],
    "ã‚›":["ğ¥¥ğª¦"],
    "ã‚œ":["ğ¤ª"],
    "ãƒ¼":["ğ¥¥ğª¤"],
    " ":[NBSP],
    "ã€€":[NBSP],  // fullwidth space
    "0":["ğ Šğª›"],"1":["ğ €ğªœ"],"2":["ğ ğªœ"],"3":["ğ¢†ğªœ"],"4":["ğ¡„ğªœ"],
    "5":["ğ£·ğªœ"],"6":["ğ£œğª¢"],"7":["ğ ğª¢"],"8":["ğ¢ğª¢"],"9":["ğ¡ğª¢"]
};

const JSL_DIGRAPH = {
    "ãã‚ƒ":["ğ£®ğªœğª¦","ğ¥¥ğª¤","ğ¢šğªœ"],"ãã‚…":["ğ£®ğªœğª¦","ğ¥¥ğª¤","ğ¢Œ"],"ãã‚‡":["ğ£®ğªœğª¦","ğ¥¥ğª¤","ğ¡„ğª¢"],
    "ã—ã‚ƒ":["ğ ğª¢","ğ¥¥ğª¤","ğ¢šğªœ"],"ã—ã‚…":["ğ ğª¢","ğ¥¥ğª¤","ğ¢Œ"],"ã—ã‚‡":["ğ ğª¢","ğ¥¥ğª¤","ğ¡„ğª¢"],
    "ã¡ã‚ƒ":["ğ¢–ğªœ","ğ¥¥ğª¤","ğ¢šğªœ"],"ã¡ã‚…":["ğ¢–ğªœ","ğ¥¥ğª¤","ğ¢Œ"],"ã¡ã‚‡":["ğ¢–ğªœ","ğ¥¥ğª¤","ğ¡„ğª¢"],
    "ã«ã‚ƒ":["ğ ğª¢","ğ¥¥ğª¤","ğ¢šğªœ"],"ã«ã‚…":["ğ ğª¢","ğ¥¥ğª¤","ğ¢Œ"],"ã«ã‚‡":["ğ ğª¢","ğ¥¥ğª¤","ğ¡„ğª¢"],
    "ã²ã‚ƒ":["ğ €ğªœ","ğ¥¥ğª¤","ğ¢šğªœ"],"ã²ã‚…":["ğ €ğªœ","ğ¥¥ğª¤","ğ¢Œ"],"ã²ã‚‡":["ğ €ğªœ","ğ¥¥ğª¤","ğ¡„ğª¢"],
    "ã¿ã‚ƒ":["ğ¢Œğª¢","ğ¥¥ğª¤","ğ¢šğªœ"],"ã¿ã‚…":["ğ¢Œğª¢","ğ¥¥ğª¤","ğ¢Œ"],"ã¿ã‚‡":["ğ¢Œğª¢","ğ¥¥ğª¤","ğ¡„ğª¢"],
    "ã‚Šã‚ƒ":["ğ¦¢ğª¬","ğ ğª","ğ¥¥ğª¤","ğ¢šğªœ"],"ã‚Šã‚…":["ğ¦¢ğª¬","ğ ğª","ğ¥¥ğª¤","ğ¢Œ"],"ã‚Šã‚‡":["ğ¦¢ğª¬","ğ ğª","ğ¥¥ğª¤","ğ¡„ğª¢"],
    "ãã‚ƒ":["ğ£®ğªœğª¦ğ¥¥ğª¦","ğ¥¥ğª¤","ğ¢šğªœ"],"ãã‚…":["ğ£®ğªœğª¦ğ¥¥ğª¦","ğ¥¥ğª¤","ğ¢Œ"],"ãã‚‡":["ğ£®ğªœğª¦ğ¥¥ğª¦","ğ¥¥ğª¤","ğ¡„ğª¢"],
    "ã˜ã‚ƒ":["ğ ğª¢ğ¥¥ğª¦","ğ¥¥ğª¤","ğ¢šğªœ"],"ã˜ã‚…":["ğ ğª¢ğ¥¥ğª¦","ğ¥¥ğª¤","ğ¢Œ"],"ã˜ã‚‡":["ğ ğª¢ğ¥¥ğª¦","ğ¥¥ğª¤","ğ¡„ğª¢"],
    "ã¢ã‚ƒ":["ğ¢–ğªœğ¥¥ğª¦","ğ¥¥ğª¤","ğ¢šğªœ"],"ã¢ã‚…":["ğ¢–ğªœğ¥¥ğª¦","ğ¥¥ğª¤","ğ¢Œ"],"ã¢ã‚‡":["ğ¢–ğªœğ¥¥ğª¦","ğ¥¥ğª¤","ğ¡„ğª¢"],
    "ã³ã‚ƒ":["ğ €ğªœğ¥¥ğª¦","ğ¥¥ğª¤","ğ¢šğªœ"],"ã³ã‚…":["ğ €ğªœğ¥¥ğª¦","ğ¥¥ğª¤","ğ¢Œ"],"ã³ã‚‡":["ğ €ğªœğ¥¥ğª¦","ğ¥¥ğª¤","ğ¡„ğª¢"],
    "ã´ã‚ƒ":["ğ¤ª","ğ €ğªœ","ğ¥¥ğª¤","ğ¢šğªœ"],"ã´ã‚…":["ğ¤ª","ğ €ğªœ","ğ¥¥ğª¤","ğ¢Œ"],"ã´ã‚‡":["ğ¤ª","ğ €ğªœ","ğ¥¥ğª¤","ğ¡„ğª¢"]
};

// â”€â”€â”€ State â”€â”€â”€
let LANG_CODE = "asl";

const VERTICAL = { ".":"ğªˆ",",":"ğª‡",":":"ğªŠ",";":"ğª‰","(":"ğª‹",")":"ğª‹ğª¤" };

// â”€â”€â”€ JSL tokenizer (matches Python tokenize_jap) â”€â”€â”€
function tokenizeJSL(text) {
    const tokens = [];
    const chars = Array.from(text);
    let i = 0;
    while (i < chars.length) {
        const pair = chars[i] + (chars[i + 1] || "");
        if (pair.length === 2 && JSL_DIGRAPH[pair]) {
            tokens.push(JSL_DIGRAPH[pair]);
            i += 2;
        } else {
            tokens.push(JSL_DICT[chars[i]] || [chars[i]]);
            i += 1;
        }
    }
    return tokens;
}

// â”€â”€â”€ JSL horizontal (matches Python jap_to_jsl_h) â”€â”€â”€
function jslHorizontal(text) {
    const tokens = tokenizeJSL(text);
    if (tokens.length === 0) return "";
    const h = Math.max(...tokens.map(t => t.length));
    const lanes = Array.from({length: h}, () => []);
    for (const t of tokens) {
        // Bottom-align: pad top with empty strings
        const padded = Array(h - t.length).fill("").concat(t);
        for (let i = 0; i < h; i++) {
            lanes[i].push(padded[i] || NBSP);
        }
    }
    return lanes.map(lane => lane.join(SEP)).join("\n");
}

// â”€â”€â”€ JSL vertical (matches Python jap_to_jsl_v) â”€â”€â”€
function jslVertical(text) {
    // Split on spaces (regular and fullwidth)
    const words = text.split(/[ ã€€]+/).filter(w => w.length > 0);
    const wordBlocks = [];
    for (const word of words) {
        const tokens = tokenizeJSL(word);
        wordBlocks.push(tokens.map(t => t.join("\n")).join("\n\n"));
    }
    return wordBlocks.join("\n\n\n");
}

// â”€â”€â”€ ASL/LIBRAS tokenizer â”€â”€â”€
function tokenizeStr(text, dict) {
    const chars = Array.from(text);
    return chars.map(ch => {
        const lookup = dict[ch] || dict[ch.toUpperCase()] || ch;
        return typeof lookup === "string" ? lookup.split("\n") : [lookup];
    });
}

// â”€â”€â”€ ASL/LIBRAS horizontal â”€â”€â”€
function strHorizontal(text, dict) {
    const tokens = tokenizeStr(text, dict);
    if (tokens.length === 0) return "";
    const maxLines = Math.max(...tokens.map(t => t.length));
    const grid = Array.from({length: maxLines}, () => "");
    for (const parts of tokens) {
        const diff = maxLines - parts.length;
        for (let j = 0; j < maxLines; j++) {
            grid[j] += (j < diff) ? NBSP : parts[j - diff];
        }
    }
    return grid.join("\n");
}

// â”€â”€â”€ ASL/LIBRAS vertical â”€â”€â”€
function strVertical(text, dict) {
    const tokens = tokenizeStr(text, dict);
    return tokens.map(t => {
        return t.map(component => {
            return VERTICAL[component] || component;
        }).join("\n");
    }).join("\n\n");
}

// â”€â”€â”€ Main render â”€â”€â”€
function textToFingerspell(text, mode) {
    if (!text.trim()) return "";

    if (LANG_CODE === "jsl") {
        return mode === "vertical" ? jslVertical(text) : jslHorizontal(text);
    }

    // ASL / LIBRAS
    const dict = DICTS_STR[LANG_CODE] || DICTS_STR.asl;
    // Strip accents for LIBRAS
    text = text.normalize("NFD").replace(/[\u0300-\u036f]/g, "");

    return mode === "vertical" ? strVertical(text, dict) : strHorizontal(text, dict);
}

function render(mode) {
    const out = [];
    const lines = inputText.value.split("\n");
    for (const l of lines) {
        const r = textToFingerspell(l, mode);
        if (r) out.push(r);
    }
    output.value = out.join("\n\n");
}

function setLanguage(l) {
    LANG_CODE = l;
    render("horizontal");
}

function toggleLang() {
    langMenu.style.display = langMenu.style.display === "block" ? "none" : "block";
}

function pickLang(l) {
    setLanguage(l);
    langButton.textContent = l.toUpperCase() + " â–¾";
    langMenu.style.display = "none";
}

document.addEventListener("click", e => {
    if (!e.target.closest(".lang")) langMenu.style.display = "none";
});
</script>

</body>
</html>
